
DevTools listening on ws://127.0.0.1:35803/devtools/browser/591aab6d-caac-4fcf-b974-99a81bd3e005

================================================================================

  (Run Starting)

  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐
  │ Cypress:        15.0.0                                                                         │
  │ Browser:        Electron 136 (headless)                                                        │
  │ Node Version:   v22.19.0 (/home/karol/.nvm/versions/node/v22.19.0/bin/node)                    │
  │ Specs:          1 found (apiClient.cy.ts)                                                      │
  │ Searched:       cypress/e2e/apiClient.cy.ts                                                    │
  └────────────────────────────────────────────────────────────────────────────────────────────────┘


────────────────────────────────────────────────────────────────────────────────────────────────────
                                                                                                    
  Running:  apiClient.cy.ts                                                                 (1 of 1)


  API Client Token Refresh
    1) should refresh token against the mock backend and retry the request
    2) should handle refresh token failure and redirect to login


  0 passing (6s)
  2 failing

  1) API Client Token Refresh
       should refresh token against the mock backend and retry the request:
     AssertionError: Timed out retrying after 4000ms: [object Object]: expected 'http://localhost:3003/login' to include '/dashboard'
      at Context.eval (webpack://frontend-tmp/./cypress/e2e/apiClient.cy.ts:34:15)
      at getRet (http://localhost:3003/__cypress/runner/cypress_runner.js:120768:20)
      at tryCatcher (http://localhost:3003/__cypress/runner/cypress_runner.js:1777:23)
      at Promise.attempt.Promise.try (http://localhost:3003/__cypress/runner/cypress_runner.js:4285:29)
      at Context.thenFn (http://localhost:3003/__cypress/runner/cypress_runner.js:120779:66)
      at Context.then (http://localhost:3003/__cypress/runner/cypress_runner.js:121030:21)
      at wrapped (http://localhost:3003/__cypress/runner/cypress_runner.js:141618:19)

  2) API Client Token Refresh
       should handle refresh token failure and redirect to login:
     AssertionError: expected 'expired-token' to be null
      at Object.proxyGetter [as get] (http://localhost:3003/__cypress/runner/cypress_runner.js:80426:22)
      at Context.eval (webpack://frontend-tmp/./cypress/e2e/apiClient.cy.ts:98:61)
      at getRet (http://localhost:3003/__cypress/runner/cypress_runner.js:120768:20)
      at tryCatcher (http://localhost:3003/__cypress/runner/cypress_runner.js:1777:23)
      at Promise.attempt.Promise.try (http://localhost:3003/__cypress/runner/cypress_runner.js:4285:29)




  (Results)

  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐
  │ Tests:        2                                                                                │
  │ Passing:      0                                                                                │
  │ Failing:      2                                                                                │
  │ Pending:      0                                                                                │
  │ Skipped:      0                                                                                │
  │ Screenshots:  2                                                                                │
  │ Video:        false                                                                            │
  │ Duration:     5 seconds                                                                        │
  │ Spec Ran:     apiClient.cy.ts                                                                  │
  └────────────────────────────────────────────────────────────────────────────────────────────────┘


  (Screenshots)

  -  /home/karol/dev/code/fridgr/frontend/cypress/screenshots/apiClient.cy.ts/API Cli     (1280x720)
     ent Token Refresh -- should refresh token against the mock backend and retry the               
      request (failed).png                                                                          
  -  /home/karol/dev/code/fridgr/frontend/cypress/screenshots/apiClient.cy.ts/API Cli     (1280x720)
     ent Token Refresh -- should handle refresh token failure and redirect to login (               
     failed).png                                                                                    


================================================================================

  (Run Finished)


       Spec                                              Tests  Passing  Failing  Pending  Skipped  
  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐
  │ ✖  apiClient.cy.ts                          00:05        2        -        2        -        - │
  └────────────────────────────────────────────────────────────────────────────────────────────────┘
    ✖  1 of 1 failed (100%)                     00:05        2        -        2        -        -  

